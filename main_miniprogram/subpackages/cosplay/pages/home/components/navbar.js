(global["webpackChunkuniapp_cocokele"]=global["webpackChunkuniapp_cocokele"]||[]).push([["pages/home/components/navbar"],{1284:function(t,e,n){"use strict";var i;n.r(e),n.d(e,{default:function(){return d}});var o,a=function(){var t=this,e=t.$createElement,i=(t._self._c,n(6468));t.$mp.data=Object.assign({},{$root:{m0:i}})},r=[],s=n(6480)["default"],c={name:"SafeAreaTabbar",props:{navList:{type:Array,default:function(){return[]}},currentIndex:{type:Number,default:0}},watch:{currentIndex:function(t){this.pickedTab=t,this.scrollToTab(t)},navList:{handler:function(){this.resetRetryState(),this.cacheTabPositions()},deep:!0,immediate:!1}},data:function(){return{navBarStyle:{},pickedTab:0,scrollLeft:0,tabPositions:[],viewportCenter:0,systemInfo:{},retryCount:0,maxRetryCount:3,baseRetryDelay:500,retryTimeout:null}},created:function(){this.getSystemInfo();var t=s.getStorageSync("navBarInfo");t&&(this.navBarStyle="height: ".concat(t.navBarHeight,"px;"),this.navBarStyle+="width: calc(100vw - ".concat(t.menuButton.width||75,"px - 40px)"))},mounted:function(){this.cacheTabPositions(),this.scrollToTab(this.currentIndex)},beforeUnmount:function(){this.clearRetryTimeout()},methods:{resetRetryState:function(){this.clearRetryTimeout(),this.retryCount=0},clearRetryTimeout:function(){this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=null)},getSystemInfo:function(){try{var t,e=s.getStorageSync("navBarInfo"),n=s.getStorageSync("windowWidth")||375;this.systemInfo=e||{},this.viewportCenter=(n-((null===e||void 0===e||null===(t=e.menuButton)||void 0===t?void 0:t.width)||75)-40)/2||187.5}catch(i){console.error("获取系统信息失败",i),this.systemInfo={windowWidth:375},this.viewportCenter=187.5}},cacheTabPositions:function(){var t=this;if(this.navList&&0!==this.navList.length){var e=s.createSelectorQuery().in(this);e.selectAll(".game-tab").boundingClientRect(),e.exec(function(e){e&&e[0]&&e[0].length>0?(t.tabPositions=e[0],t.resetRetryState(),void 0!==t.pickedTab&&t.scrollToTab(t.pickedTab)):t.scheduleRetry(t.cacheTabPositions)})}else this.scheduleRetry(this.cacheTabPositions)},scrollToTab:function(t){var e=this;if(this.pickedTab=t,!this.tabPositions||!this.tabPositions[t])return 0===this.retryCount&&this.cacheTabPositions(),void this.scheduleRetry(function(){return e.scrollToTab(t)});var n=this.tabPositions[t],i=n.left+n.width/2,o=Math.max(0,i-this.viewportCenter);this.scrollLeft=o},scheduleRetry:function(t){var e=this;if(this.retryCount>=this.maxRetryCount)return console.warn("已达到最大重试次数(".concat(this.maxRetryCount,")，停止重试")),void this.resetRetryState();this.retryCount++,this.clearRetryTimeout();var n=this.baseRetryDelay*Math.pow(2,this.retryCount-1);console.log("计划在".concat(n,"ms后重试，当前重试次数：").concat(this.retryCount)),this.retryTimeout=setTimeout(function(){t.call(e)},n)},handleTabClick:function(t){this.pickedTab=t,this.$emit("changeTab",t),this.scrollToTab(t)}}},h=c,u=n(1892),l=n.n(u),y=(l(),n(8535)),b=(0,y["default"])(h,a,r,!1,null,"def15640",null,!1,i,o),d=b.exports},1892:function(){}}]),(global["webpackChunkuniapp_cocokele"]=global["webpackChunkuniapp_cocokele"]||[]).push([["pages/home/components/navbar-create-component"],{},function(t){t("6480")["createComponent"](t(1284))}]);