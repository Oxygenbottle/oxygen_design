(global["webpackChunkuniapp_cocokele"]=global["webpackChunkuniapp_cocokele"]||[]).push([["pages/home/components/content"],{931:function(t,e,n){"use strict";var i;n.r(e),n.d(e,{default:function(){return T}});var o,s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.swiperChangeEnd(e)})},a=[],c=n(575),r=n(6766),u=n.n(r),l=n(4203),h=n(6480)["default"],d=function(){n.e("pages/home/components/postItem").then(function(){return resolve(n(6509))}.bind(null,n))["catch"](n.oe)},f={components:{postItem:d},props:{outerSwiperIndex:{type:Number,default:0},classList:{type:Array,default:[]}},data:function(){return{tabs:[{name:"COS"},{name:"古风"},{name:"谷子"},{name:"棚子"},{name:"出图"},{name:"咖啡馆"},{name:"分享"},{name:"讨论"}],activeIndex:0,currentTabWidth:0,currentTabLeft:0,tabPositions:[],isScrolling:!1,systemInfo:{},scrollLeft:0,postList:l["default"].postData,_outerSwiperIndex:0}},mounted:function(){var t=this;return(0,c["default"])(u().mark(function e(){return u().wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=1,t.getSystemInfo();case 1:t.cacheTabPositions();case 2:case"end":return e.stop()}},e)}))()},computed:{indicatorStyle:function(){var t=this.systemInfo.windowWidth*this._outerSwiperIndex,e=this.currentTabLeft+this.currentTabWidth/2-24-t;return"left: ".concat(e,"px;")},viewportCenter:function(){return this.systemInfo.windowWidth/2||300}},watch:{outerSwiperIndex:{handler:function(t,e){console.log("获取外层swiper的索引 ======= >",t),this._outerSwiperIndex=t},immediate:!0}},methods:{getSystemInfo:function(){try{var t=h.getStorageSync("windowWidth");this.systemInfo={windowWidth:t}}catch(e){console.error("获取系统信息失败",e),this.systemInfo={windowWidth:375}}},cacheTabPositions:function(){var t=this,e=h.createSelectorQuery().in(this);console.log("获取所有tab-item的位置信息 ======= >",e),e.selectAll(".tab-item").boundingClientRect(),e.exec(function(e){e&&e[0]?(t.tabPositions=e[0],t.updateTabIndicator(0)):setTimeout(function(){t.cacheTabPositions()},100)})},updateTabIndicator:function(t){if(this.tabPositions[t]){console.log("index ======= >",t);var e=this.tabPositions[t];this.currentTabWidth=e.width,this.currentTabLeft=e.left}},handleClickTab:function(t){this.isScrolling||(this.activeIndex=t,this.updateTabIndicator(t),this.scrollToTab(t))},scrollToTab:function(t){var e=this;if(this.tabPositions[t]){var n=this.tabPositions[t],i=n.left+n.width/2,o=i-this.viewportCenter-this.systemInfo.windowWidth*this._outerSwiperIndex;this.isScrolling=!0,this.scrollLeft=o,setTimeout(function(){e.isScrolling=!1},300)}},swiperChangeEnd:function(t){var e=this;this.activeIndex=t.detail.current,setTimeout(function(){e.scrollToTab(t.detail.current),e.updateTabIndicator(t.detail.current)},0)}}},p=f,m=n(4396),b=n.n(m),w=(b(),n(8535)),I=(0,w["default"])(p,s,a,!1,null,"2bff659f",null,!1,i,o),T=I.exports},4396:function(){}}]),(global["webpackChunkuniapp_cocokele"]=global["webpackChunkuniapp_cocokele"]||[]).push([["pages/home/components/content-create-component"],{},function(t){t("6480")["createComponent"](t(931))}]);